<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd">

    <changeSet id="1" author="Viktoria Reunova">
        <sql>
            create table seller
            (
                id             int auto_increment,
                name_seller    varchar(100),
                surname_seller varchar(100),
                constraint seller_pk primary key (id)
            );
            insert into seller (name_seller, surname_seller)
            values ('Мария', 'Кузьмина'),
                   ('Петр', 'Акульев'),
                   ('Жанна', 'Сметанова'),
                   ('Василий', 'Сапожников');
        </sql>
    </changeSet>

    <changeSet id="2" author="Viktoria Reunova">
        <sql>
            create table buyer
            (
                id            int auto_increment,
                name_buyer    varchar(100),
                surname_buyer varchar(100),
                constraint buyer_pk primary key (id)
            );
            insert into buyer (name_buyer, surname_buyer)
            values ('Матвей', 'Краснов'),
                   ('Семен', 'Лосин'),
                   ('Соня', 'Бодрая'),
                   ('Зоя', 'Виноградова');
        </sql>
    </changeSet>

    <changeSet id="3" author="Viktoria Reunova">
        <sql>
            create table lot
            (
                lot_id      int auto_increment,
                name_lot    varchar(100),
                description varchar(1000),
                start_date  date,
                end_date    date,
                start_price dec(10, 2),
                end_price   dec(10, 2),
                seller_id   int,
                constraint lot_pk primary key (lot_id),
                constraint lot_seller_fk foreign key (seller_id) references seller (id)
            );
            insert into lot (name_lot, description, start_date, end_date, start_price, end_price, seller_id)
            VALUES ('Будильник', 'Описание будильника', '2022-05-03', '2022-05-07', 36.0, 4.0, 2),
                   ('Светильник', 'Описание светильника', '2022-04-29', '2022-05-08', 100.25, 53.0, 1),
                   ('Утюг', 'Описание утюга', '2022-04-08', '2022-05-10', 163.5, 75.5, 4),
                   ('Холодильник', 'Описание холодильника', '2022-04-01', '2022-05-15', 478.0, 47.8, 1);
        </sql>
    </changeSet>

    <changeSet id="4" author="Viktoria Reunova">
        <sql>
            create table order_history
            (
                lot_id           int,
                buyer_id         int,
                date_of_purchase date,
                current_price    dec(10, 2),
                constraint order_history_pk primary key (lot_id),
                constraint order_history_buyer_fk foreign key (buyer_id) references buyer (id)
            );
        </sql>
    </changeSet>
</databaseChangeLog>